define(["require","exports","tslib","react","modules/core/i18n","modules/core/uri","modules/core/browser","modules/clean/static_urls","modules/clean/react/file_activity_stream/thirdparty_activity_clickable_text","modules/clean/react/file_activity_stream/utils","modules/clean/react/file_sidebar/store/file_activity/types","modules/clean/react/file_activity_stream/file_activity_stream_card","modules/clean/react/file_activity_stream/thirdparty_activity_onboarding_logic","modules/clean/integrations/log_event","deep-integrations/instrumentation/constants"],(function(e,t,a,r,_,i,n,o,s,l,d,c,h,m,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r=a.__importDefault(r),n=a.__importStar(n);var f={attach_file_to_card:{details_yes__actor_other:_._("<strong>%(actor_name)s</strong> added this file to the <CardLink>%(card_name)s</CardLink> card in %(list_name)s"),details_yes__actor_self:_._("<strong>You</strong> added this file to the <CardLink>%(card_name)s</CardLink> card in %(list_name)s"),details_yes__actor_no:_._("This file was added to the <CardLink>%(card_name)s</CardLink> card in %(list_name)s"),details_no__actor_other:_._("<strong>%(actor_name)s</strong> added this file to <AuthLink>Trello</AuthLink>"),details_no__actor_self:_._("<strong>You</strong> added this file to <AuthLink>Trello</AuthLink>"),details_no__actor_no:_._("This file was added to <AuthLink>Trello</AuthLink>")},move_card_between_lists:{details_yes__actor_other:_._("<strong>%(actor_name)s</strong> moved the <CardLink>%(card_name)s</CardLink> card with this file attached to %(list_name)s"),details_yes__actor_self:_._("<strong>You</strong> moved the <CardLink>%(card_name)s</CardLink> card with this file attached to %(list_name)s"),details_yes__actor_no:_._("The <CardLink>%(card_name)s</CardLink> card with this file attached was moved to %(list_name)s")},move_card_between_boards:{details_yes__actor_other:_._("<strong>%(actor_name)s</strong> moved the <CardLink>%(card_name)s</CardLink> card with this file attached to the %(board_name)s board"),details_yes__actor_self:_._("<strong>You</strong> moved the <CardLink>%(card_name)s</CardLink> card with this file attached to the %(board_name)s board"),details_yes__actor_no:_._("The <CardLink>%(card_name)s</CardLink> card with this file attached was moved to the %(board_name)s board"),details_no__actor_other:_._("<strong>%(actor_name)s</strong> moved the %(card_name)s card with this file attached to another board"),details_no__actor_self:_._("<strong>You</strong> moved the %(card_name)s card with this file attached to another board"),details_no__actor_no:_._("The %(card_name)s card with this file attached was moved to another board")},archive_card:{details_yes__actor_other:_._("<strong>%(actor_name)s</strong> archived the <CardLink>%(card_name)s</CardLink> card with this file attached"),details_yes__actor_self:_._("<strong>You</strong> archived the <CardLink>%(card_name)s</CardLink> card with this file attached"),details_yes__actor_no:_._("The <CardLink>%(card_name)s</CardLink> card with this file attached was archived")},unarchive_card:{details_yes__actor_other:_._("<strong>%(actor_name)s</strong> unarchived the <CardLink>%(card_name)s</CardLink> card with this file attached"),details_yes__actor_self:_._("<strong>You</strong> unarchived the <CardLink>%(card_name)s</CardLink> card with this file attached"),details_yes__actor_no:_._("The <CardLink>%(card_name)s</CardLink> with this file attached was unarchived to the %(board_name)s board")}},v=function(e,t){return m.createIntegrationsActionsLogger().logEvent({service_type:"trello",feature_name:u.InstrFeatureType.TrelloActivityFeed,event_name:e,extra:t})};t.TrelloFileActivityCard=function(e){var t=e.activity,m=e.file,y=e.viewingUser,g=r.default.useState(r.default.createElement("span",null)),k=g[0],C=g[1],L={actor_name:t.user.display_name,card_name:t.trello_card_name,list_name:t.trello_list_name,board_name:t.trello_board_name,strong:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r.default.createElement("strong",null,e)},CardLink:function(){for(var e=[],a=0;a<arguments.length;a++)e[a]=arguments[a];return r.default.createElement(s.ClickableText,{hoverText:_._("View in Trello"),clickHandler:function(){var e=t.trello_card_url;e&&(n.unsafe_open_tab(new i.URI({scheme:"https",authority:"trello.com",path:"/c/"+e})),v(u.InstrEventType.UserClick,{link_type:"trello_card"}))}},e)},AuthLink:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r.default.cloneElement.apply(r.default,a.__spreadArrays([k,{}],e))}};h.userHasNotConnectedToService(y,"trello").then((function(e){e&&C(r.default.createElement(s.ClickableText,{hoverText:_._("Connect to Trello"),clickHandler:function(){n.open_tab(new i.URI({path:"/landing/trello"})),v(u.InstrEventType.UserClick,{link_type:"trello_landing_page"})}}))}));var p,w=t.user.id!==l.UNKNOWN_USER_ID,b=l.isViewingUser({activity:t,file:m,viewingUser:y}),T=!(!t.trello_card_name||!t.trello_card_url),E=!(!t.trello_list_name||!t.trello_board_name);if(v(u.InstrEventType.RenderedFeature,{activity_type:t.trello_event_type}),!T){var A=t.trello_event_type===d.TrelloEventType.attach_file_to_card&&!E,U=t.trello_event_type===d.TrelloEventType.move_card_between_boards&&!!t.trello_card_name&&!E;if(!(A||U))return null}p=w?E?b?"details_yes__actor_self":"details_yes__actor_other":b?"details_no__actor_self":"details_no__actor_other":E?"details_yes__actor_no":"details_no__actor_no";var I=f[t.trello_event_type][p];return I?r.default.createElement(c.FileActivityStreamCard,{message:_.intl.formatMessage(I,L),timestamp:t.timestamp,user:t.user,className:"file_trello_activity_stream_card",thirdPartyData:{logoUrl:o.static_url("/static/images/thirdparty/trello_icon-vfl-FetdA.svg"),localizedName:_._("Trello")}}):null}}));
//# sourceMappingURL=trello_file_activity_card.min.js-vfl16r3jp.map