define(["require","exports","tslib","react","modules/clean/react/montana/in_product_modal/in_product_modal","modules/clean/react/montana/in_product_modal/in_product_modal_components","modules/clean/react/montana/in_product_modal/plus/plus_announcement","modules/clean/react/montana/in_product_modal/plus/plus_education_menu_monthly","modules/clean/react/montana/in_product_modal/plus/plus_education_menu","modules/clean/react/montana/in_product_modal/plus/plus_education_slides","modules/clean/api_v2/user_client","modules/clean/react/montana/in_product_modal/logging","modules/clean/react/montana/in_product_modal/plus/events"],(function(e,t,n,a,o,l,s,i,c,r,u,d,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a=n.__importStar(a),p=n.__importStar(p);var m=(function(e){function t(t){var n=e.call(this,t)||this;return n.getSelectedFeatureType=function(){return n.state.selectedIndex?p.featureType[n.state.selectedIndex]:null},n.getCTA=function(e){return p.slidesCTA[e]},n.createCloseHandler=function(e){return function(t){t&&t.stopPropagation(),"got_it"===e?d.logEvent("plus_ipa_modal_dismiss",{featureType:"intro",cta:e}):d.logEvent("plus_ipa_modal_dismiss",{featureType:n.getSelectedFeatureType()}),n.props.onRequestClose()}},n.createSlideClickHandler=function(e){return function(){null===n.state.selectedIndex?(d.logEvent("plus_ipa_modal_click",{featureType:"intro",cta:n.getCTA(e)}),n.setState({animationIn:!0,selectedIndex:e})):(d.logEvent("plus_ipa_modal_click",{featureType:n.getSelectedFeatureType(),cta:n.getCTA(e)}),n.setState({selectedIndex:e}))}},n.handleBack=function(){d.logEvent("plus_feature_update_modal_click",{featureType:n.getSelectedFeatureType(),cta:"back"}),n.setState({animationIn:!1,selectedIndex:null})},n.handleAnimationEntered=function(){!1===n.state.shouldAnimate&&n.setState({shouldAnimate:!0})},n.handleSmartSyncEnable=function(){n.setState({isSmartSyncEnabled:!0}),d.logEvent("plus_feature_update_modal_click",{featureType:n.getSelectedFeatureType(),cta:"enable"}),(new u.UserApiV2Client).ns("montana").rpc("enable_smart_sync",void 0,{subjectUserId:n.props.user.id})},n.state={animationIn:!t.showAnnouncement,shouldAnimate:t.showAnnouncement,selectedIndex:t.showAnnouncement?null:r.SLIDES.SmartSync,isSmartSyncEnabled:t.isSmartSyncEnabled||!1},n}return n.__extends(t,e),t.prototype.componentDidMount=function(){d.logEvent("plus_ipa_modal_view",{featureType:"intro"})},t.prototype.render=function(){return a.createElement(o.InProductModal,{shouldAnimate:this.state.shouldAnimate,isOpen:this.props.isOpen},a.createElement(l.InProductModalAnnouncement,{animationIn:this.state.animationIn,shouldAnimate:this.state.shouldAnimate},a.createElement(s.PlusAnnouncement,{canChangePlan:this.props.canChangePlan,handleGotIt:this.createCloseHandler("got_it"),isMonthly:this.props.isMonthly,rebillDate:this.props.migrationPriceDate,priceDifference:this.props.priceDifference,amount:this.props.price})),a.createElement(l.InProductModalEducation,{animationIn:this.state.animationIn,shouldAnimate:this.state.shouldAnimate,onAnimationEntered:this.handleAnimationEntered,onBack:this.handleBack,onClose:this.createCloseHandler("dismiss")},this.props.isMonthly?a.createElement(i.PlusEducationMenuMonthly,{createSlideClickHandler:this.createSlideClickHandler,selectedIndex:this.state.selectedIndex,quotaShort:this.props.quotaShort,vacuumingPolicyMaxDays:this.props.vacuumingPolicyMaxDays}):a.createElement(c.PlusEducationMenu,{createSlideClickHandler:this.createSlideClickHandler,selectedIndex:this.state.selectedIndex,quotaShort:this.props.quotaShort,vacuumingPolicyMaxDays:this.props.vacuumingPolicyMaxDays}),a.createElement(r.PlusEducationSlides,{selectedIndex:this.state.selectedIndex,isSmartSyncEnabled:this.state.isSmartSyncEnabled,onSmartSyncEnable:this.handleSmartSyncEnable,quotaLong:this.props.quotaLong,vacuumingPolicyMaxDays:this.props.vacuumingPolicyMaxDays})))},t})(a.PureComponent);t.InProductModalPlus=m}));
//# sourceMappingURL=in_product_modal_plus.min.js-vflNP-IOA.map